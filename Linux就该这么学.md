# Linux就该这么学
[TOC]

## 新手必须掌握的Linux命令
* * *
### 执行命令与查看帮助
* * *
#### man（重要）
* * *

**可以用于查看命令的具体可用参数与对象格式等等。**

### 常用系统工作命令
* * *

#### echo（重要）
* * *

**echo命令用于在终端显示字符串或变量，格式为：“echo [ 字符串 ] [ 变量 ] **。

#### data
* * *

**date命令用于显示/设置系统的时间或日期，格式为：“date[选项] [+指定的格式]。**

详细格式如下：

![image-20210812191756004](.\Picture\image-20210812191756004.png)

![image-20210812191816465](.\Picture\image-20210812191816465.png)

##### 例子：
* * *
![image-20210812191950476](.\Picture\image-20210812191950476.png)

#### reboot（重要）
* * *
**reboot命令用于重启系统（仅root用户可以使用），格式为：“reboot”**

#### wget（重要）
* * *
**wget命令用于使用命令行下载网络文件，格式为：“wget [参数] 下载地址”**
##### 参数：
* * *

![image-20210812192317080](.\Picture\image-20210812192317080.png)

![image-20210812192448308](.\Picture\image-20210812192448308.png)

#### elinks
* * *

**elinks用于实现一个纯文本界面的浏览器，格式为： “elinks [参数] 网址”**

### 系统状态检测命令
* * *

#### ifconfig（重要）
* * *
**ifconfig 用于获取网卡配置与网络状态等信息：格式为：“ifconfig [网络设备] [参数]”。**

#### uname
* * *

**uname命令用于查看系统内核版本等信息，格式为：“uname [-a]” 。

#### uptime
* * *

**uptime命令用于查看系统的负载情况，格式为：“uptime”。

#### watch -n 1 uptime 
* * *

**每秒刷新一次获得当前的系统负载情况，输出内容分别为系统当前时间、系统已运行时间、当前在线用户以及平均负载值。

#### free（重要）
* * *

**free命令用于显示当前系统中内存的使用量情况，格式为：“free [-m/-g]”。

#### who（重要）
* * *

**who命令用于查看当前登入主机的用户情况，格式为：“who [参数]”。**


#### last
* * *

**last命令用于查看所有系统的登入记录，格式为：“last[参数]”。

#### history
* * *

**用于显示历史执行过的命令，格式为：“history [-c]”。
> 历史命令会被保存到用户家目录中的“.bash_history”文件中。

#### sosreport
* * *

**用于收集系统配置并诊断信息后输出结论文档，格式为：“sosreport”。

### 工作目录切换命令
* * *

#### pwd（重要）
* * *

**pwd命令用于显示当前的工作目录，格式为： pwd[选项] **

![image-20210813001429782](.\Picture\image-20210813001429782.png)

#### cd （重要）
* * *

**命令用于切换工作路径，格式为：cd[目录名称]

![image-20210813001559170](.\Picture\image-20210813001559170.png)

#### ls（重要）
* * *

**命令用于查看目录中有那些文件，格式为：ls[  选项  ] [ 文件 ]

![image-20210813001812734](.\Picture\image-20210813001812734.png)

### 文本文件编辑命令
* * *

#### cat（重要）
* * *
**用于查看纯文本文件（较短的），格式为：cat[ 选项 ] [文件 ]**

![image-20210813002614106](.\Picture\image-20210813002614106.png)

![image-20210813002728741](.\Picture\image-20210813002728741.png)

#### more
* * *

**用于查看纯文本文件（较长的），格式为：more [ 选项 ] [ 文件 ]**

![image-20210813002907706](.\Picture\image-20210813002907706.png)

#### head
* * *

**用于查看纯文本文档的前N行，格式为：head [选项] [文件]**

![image-20210813180749507].\Picture\(image-20210813180749507.png)


#### tail
* * *


**用于查看纯文本文档的后N行，格式为：tail [选项] [文件]**

![image-20210813180925316](.\Picture\image-20210813180925316.png)


#### od
* * *

**用于对查看特殊格式的文件，格式为：od [选项] [文件]**

![image-20210813181352535](.\Picture\image-20210813181352535.png)

#### tr
* * *

**用于转换文本文件中的字符，格式为：tr [原始字符] [目标字符]**

#### wc
* * *

**用于统计指定文本的行数、字数、字节数，格式为：wc [参数] 文本**

![image-20210813181908414](.\Picture\image-20210813181908414.png)

#### cut
* * *

**用于通过列来提取文本字符，格式为：cut [参数] 文本**

![image-20210813182210978](.\Picture\image-20210813182210978.png)

#### diff
* * *

**用于比较多个文本文件的差异，格式为：diff [参数] 文件**

![image-20210813182440671](.\Picture\image-20210813182440671.png)

### 文件目录管理命令
* * *

#### touch（重要）
* * *


**用于创建空白文件与修改文件时间，格式为：touch [ 选项 ] [ 文件 ]**

![image-20210813182855285](.\Picture\image-20210813182855285.png)

##### 对于在Linux中的文件有三种时间：
> 更改时间（mtime）：内容修改时间（不包括权限的）
> 更改权限（ctime）：更改权限与属性的时间
> 读取时间（atime）：读取文件内容的时间
> 

#### mkdir（重要）
* * *

**用于创建空白的文件夹，格式为：mkdir [ 选项 ] 目录**

![image-20210813183230125](.\Picture\image-20210813183230125.png)

##### **变量!$代表上一条命令的参数**

#### cp （重要）
* * *

**用于复制文件或目录，格式为：cp [ 选项 ] 源文件 目标文件**

![image-20210813183545888](.\Picture\image-20210813183545888.png)

![image-20210813183624427](.\Picture\image-20210813183624427.png)

##### 复制命令的三种情况：
> 目标文件是一个目录，会将源文件复制到该目录中
> 目标文件是一个文件，会将源文件覆盖该文件
> 目标文件不存在，将会复制源文件并修改为目标文件的名称（重命名）
> 

#### mv （重要）
* * *

**用于移动文件或改名，格式为：mv[ 选项 ] 文件名 [目标路径 | 目标文件名 ]**

#### rm（重要）
* * *

**用于删除文件或目录，格式为：rm [ 选项 ] 文件 **

![image-20210813184608188](.\Picture\image-20210813184608188.png)

#### dd
**用于指定大小的拷贝的文件或指定转换文件，格式为：dd [参数]**

![image-20210815112328466](.\Picture\image-20210815112328466.png)

![image-20210815112347202](.\Picture\image-20210815112347202.png)

### 用户与组管理命令
* * *

#### useradd（重要）
**用于创建新的用户，格式为：useradd [ 选项 ] 用户名**

![image-20210815113102942](.\Picture\image-20210815113102942.png)

![image-20210815113128451](.\Picture\image-20210815113128451.png)

#### passwd（重要）
**用于修改用户密码，格式为：passwd [ 选项 ] [ 用户名 ]**

![image-20210815113335542](.\Picture\image-20210815113335542.png)

#### userdel (重要)
**用于删除用户所有表格，格式：userdel [ 选项 ] 用户名**

![image-20210815114133920](.\Picture\image-20210815114133920.png)

#### usermod （重要）
**用于修改用户的属性，格式为：usermod [ 选项 ] 用户名**

![image-20210815114805277](.\Picture\image-20210815114805277.png)

![image-20210815114835352](.\Picture\image-20210815114835352.png)

#### groupadd （重要）
**用于创建组群，格式为：groupadd [ 选项 ] 群组名**

### 打包压缩文件命令
#### tar （重要）
**用于对文件打包压缩或解压，格式为：tar [ 选项 ] [ 文件 ]**

![image-20210815115152795](.\Picture\image-20210815115152795.png)

![image-20210815115205190](.\Picture\image-20210815115205190.png)

### 文件查询搜索命令
#### grep（重要）
**用于对文本进行搜素，格式为：grep [ 选项 ] [ 选项 ]**
搜素某个关键词：grep 关键词 文本文件

![image-20210815115416681](.\Picture\image-20210815115416681.png)

#### find （重要）
**用于查找文件，格式为：find [ 查找路径 ] 寻找条件 操作**
常用搜素路径：~ 代表用户的家目录     . 代表当前目录  / 代表根目录

![image-20210815180851301](.\Picture\image-20210815180851301.png)

![image-20210815180911708](.\Picture\image-20210815180911708.png)

## 管道符、重定向与环境变量
* * *

### 管道命令符
**| 的作用是将前一个命令的标准输出当作后一个命令的标准输入，格式为：命令A|命令B**
管道命令符在不是只能使用一次，还可以这样使用：命令A|命令B|命令C

### 输入输出重定向
**标准输入（STDIN,文件描述符为0）：默认从键盘输入，为0时表示是从其他文件或命令的输出。
标准输出（STDOUT，文件描述符为1）：默认输出到屏幕，为1时表示是文件。
错误输出（STDERR，文件描述符为2）：默认输出到屏幕，为2时表示是文件。
**

![image-20210815181722206](.\Picture\image-20210815181722206.png)

![image-20210815181842556](.\Picture\image-20210815181842556.png)

### 命令行通配符

![image-20210815182004019](.\Picture\image-20210815182004019.png)

![image-20210815182023932](.\Picture\image-20210815182023932.png)

![image-20210815182059945](.\Picture\image-20210815182059945.png)

![image-20210815182154612](.\Picture\image-20210815182154612.png)

**反引号里的命令会被执行**

### 实用的PATH变量

**alias 命令用于设置命令的别名，格式为：alias 别名=命令
unalias 命令用于取消命令的别名。格式为：unalias 别名
**

如果想知道一个命令是内部命令（属于解释器内部的）还是外部命令（独立于解释器外的命令）执行**type 命令名字**解释器就会告诉你。

### 重要的环境变量
**用env命令可以查看到系统中的环境变量**

![image-20210815182916695](.\Picture\image-20210815182916695.png)

![image-20210815182950039](.\Picture\image-20210815182950039.png)

#### 定义变量

变量名称=新的值

#### 查看方法

echo $变量名称

**export命令用于将局部变量提升为全局变量，格式为：export 变量名[ =变量值 ]**

## Vim编辑器与Shell命令脚本

### Vim快捷键

![image-20210815184017788](.\Picture\image-20210815184017788.png)

![image-20210815184034124](.\Picture\image-20210815184034124.png)

![image-20210815184047902](.\Picture\image-20210815184047902.png)

### Shell脚本

#### Shell的工作形式：
1. 交互式（Interactive）：用户输入一条命令，Shell解释并执行一条。
2. 批处理（Batch）：用户事先编写一个Shell脚本，其中包含诸多命令，Shell会一次性执行完全部的命令。

####编写简单的脚本
> 脚本声明（#!）告知系统用何种shell来解释
> 注释信息（#）对可执行语句或程序功能做介绍，可以不写。
> 可执行语句 执行的具体命令
> 

####shell脚本的执行
> 脚本文件路径：./Example.sh
> sh脚本文件路径：sh Example.sh
> source脚本文件路径：source Example.sh

#### Shell 预定义变量：

![image-20210816112048096](.\Picture\image-20210816112048096.png)

#### 判断用户的参数：

**测试语句格式： [ 条件表达式 ]**

![image-20210816112234589](.\Picture\image-20210816112234589.png)

![image-20210816112258725](.\Picture\image-20210816112258725.png)

![image-20210816112310751](.\Picture\image-20210816112310751.png)

![image-20210816112322200](.\Picture\image-20210816112322200.png)

![image-20210816112335649](.\Picture\image-20210816112335649.png)

### 条件测试语句

#### if 条件语句

##### 单分支if语句：
```bash
if 条件测试操作
	then 命令序列
fi
```

######判断目录是否存在，若不存在则自动创建

```bash
#!/bin/bash
DIR="/media/cdrom"
if [! -e$DIR]
then
mkdir -p $DIR
fi
```

#### 双分支if语句
```bash
if 条件测试操作
	then 命令序列1
	else 命令序列2
fi
```

##### 判断指定主机能否ping通过，根据返回结果分别给予提示或警告
```bash
#!/bin/bash
ping -c 3 -i 0.2 -W 3 $1 &> /dev/null
if [ $? -eq 0 ]
	then
        echo "Host $1 is up."
	else
        echo "Host $1 is down."
fi
```

#### 多分支if语句
```bash
if 条件测试操作1
	then 命令序列1
elif 条件测试操作2
	then 命令序列2
else
	命令序列3
fi
```
**read 命令用于将用户的输入参数赋值给指定变量，格式为：read -p [ 提示语句 ] 变量名。**

### for条件语句
**for条件语句会先读取多个不同的变量值，然后逐一执行同一组命令**
```bash
for 变量名 in 取值列表
do
	命令序列
done
```

### while条件语句
**while条件语句用于重复测试某个条件，当条件成立时则继续重复执行。**
```bash
while条件测试操作
do
	命令序列
done
```

### case条件语句
**case条件语句可以依据变量的不同取值，分别执行不同的命令动作。**

```bash
case 变量值 in
模式1)
	命令序列1
	..
	,,
模式2)
	命令序列2
	..
	,,
*)
	默认命令序列
esac
```

### 计划任务服务
#### 计划的管理操作是at命令：

![image-20210816122347084](.\Picture\image-20210816122347084.png)

![image-20210816122725838](.\Picture\image-20210816122725838.png)

####长期可循环的计划任务用cron服务

![image-20210816122846360](.\Picture\image-20210816122846360.png)

![image-20210816122900187](.\Picture\image-20210816122900187.png)